string example = @"AAAA
BBCD
BBCC
EEEC";

string example2 = @"
OXXX
OOXX
OXXX
OXXX";

string input = @"NNNNNNNNNNNNNNNRRRRRLLLLLLLLRRBRRRRTTTTTTTTZZZZUUUZZZZZZZGGGGGGGGGGMMMMAAAAAAAAAAAAAAAAAAYYYYJJJXXXXXXXXXXXXXXXXXWWWWWWWJJJJJJJJJJJJJJJCCCCC
NINNNNNNNNNNNNNNRRLLLLLLLLRRRRRRRRRRTTTTTTZZZZZUUUZZZZZZGGGGGGGMGMMMMXXMMAAAAAAAAAAAAAAAAYYYYYJXXXXXXXXXXXXXXXHXWWWWWWWWJJJJJJJJJJJJJJJCCCCC
NNNNNNNNNNNNNNNRRRLLLLLLLRRRRRRRRRRRTTTTTTZZZZZUUUZZZZZZZGGZGMMMMMMMMMMMAAAACAAAAAAAAAAPPXJJJJJXXXXXXXXXXXXXXXXXWWWWWWWWWJJJJJJJJJJJJJCCCCCC
TNNNNNNNNNNNNNNNRLLLLLLLLLXRRRRRRRRRTTTTTLUZZZZUUUZZZZZZZZZZGGMMMMMMMJMMAAAACAAAAAAAAAXXXXXXJJJJXXXXXXXXXXXXXXXXAWAWWAWWJMMJJJJJJJJJJJCCCCCC
TNNNNNNNNNNNNNNNRRRLLLIIIIXXRRDRRRRTTTTTTLLZLZZUUUZZZZZZZZZQQQQQQQQMMMMMMCCCCAAAAAAAAALXXXXXJJJJXXXXXGXXXXXXXXAAAAAAAAJJJJJJJJJJJJJJJJJJCCCC
TTNTTNNNNNNNNNNNRRRLLTTTTIIIIRRRRRRRTTTTTLLLLLUUUUUUZZZZZZMQQQQQQQQMMMMMMCCCAAAAAAAAAAXXXXXXJJJJXXXXXXXXXXXXXAAAAAAAAAJJJJJJJJJJJJJJJJJJCCCC
TTTTTNNNNNNNNNNNNNTTTTTTTIIIIRRRRRTTTTTLLLLLLLUUUUUUZZZZZMMQQQQQQQQMMMMMMMACCAAAAAAAAAJXXJJJJJGGCXGGXXXXXXXXAAAAAAAAAAJJJJJJJJJJJJJJJJJJCCCC
TTTTTNNNNNNNNNNNNNKTTTTTTITITTTTTTTTTTTLLLLLLLUUUUUUUUUUUMMQQQQQQQQMMMMWAAAAAAAAAAAAAAJXJJJRRRRGGGGGGIXXIIXXAAAAAAAAAAJJJJJJJJJJJJJTTGGTCCCC
TTTTTTTNNFFNNFNNNDKKKTTTTTTTTTTTTTTTTTLLLLLLLLUUUUUUUUUUUMMQQQQQQQQQQQQQQAAAAAAAAAFFAFFFFJJRRRRGGGIIIIIIIIDDAAAAAAAAAAAAJJJJJJKKJJJJTTGTTTTT
TTTCTTTNFFFFFFNNOKKKKKKTTTTTTTTTEEETTTLLLLLLLLUUUUUQQQQQQQQQQQQQQQQQQQQQQAAAAAAAAAFFFFFFFFRRRRRGGRRIIIIIIIIIAAAAAAAAAAAJJJJJJKKKKKTTTTTTYTSS
CCTCCCCNCFFFFFFNOOKKKKKKKKKTTTTTEEETNNUULLLLLLUUUUUQQQQQQQQQQQQQQQQQQQQQQAAAABAAAAFFFFFFFTJJRRRRRRIMIIIIIIIYAAAAOOAAAAJJJJJJKKKKKTTTTTTTTTTT
CCTCCCCCCFFFFFFNOKKKKKKKKKTTTKTTEEENNNNLLLLLLLUUUUUQQQQQQQQQQQQQQQQQQQQQQAAAFAAAFFFFFFFFFTTTTTRRRRIIIIIIIIIIQOAAOOAJJJJJJJJJJKKYYYYTTTTTTTTT
CCCCCCCCCRFFFRRKOKKKKKKKKKKTKKTEEEEDNNNNLLLLLLLLUUUQQQQQQQQQQQQQQQQQQQQQQAAAAFAFFFFFFFFFTTTTTRRRRRRIIIIIIIIIQOOOOOOJJJJJJJJJJJKKYYYYTTTTTTTT
CCCCCCCCRRRRFRQKKKKKKKKKKKKKKKTEETENNNNNLLLLLLBBUUUQQQQQQQQQQQPQQQQQQQQQQFFFFFFFFFFFFFFFTTTTTTTTRRRIIIIIIIFQQOOOOOOJJJJJJJJJJKKKKYTTTTTTTTTT
CACCCCCCRRRRRRQKKKKKKKKKKKKKKKTEETDVVVVVVNLELLBBUUUQQQQQQQQQQQPQQQQQQQQQQFFFFFYYYFFFFFFTTTTTTTTTRRRRIIIIIFFQQOKOOOOJJJJJJJJJJKKKKTTTTTTTTTTT
AACCCCJRRRRRRRRKKKKKKKKKKKKKJKTTTTDVVVVVVNNELNBBUUUQQQQQQQQQQQPQQQQQQQQQQFYYYFYYFFYFFFFTTTTTTTTTTTRRRRIIIFFFFFFFJJJJJJJJJJJJKKKKKTTTTTTTTTTT
ACCCCURRRRRRRRRKKKKKKKKKKKKTTTTTTTNVVVVVVNNEENBBUUUIIQQQQQQQQQPQQQQQQQQQQYYYYYYYFFYYFFFTUTTTTTRTRRRRRRRIKFFWFGGGJJJJJJJJJJJKKKKKKTTTTTTTTTTT
ACCCCCRRRRRRRRRRKKKKKKKKKKOTTTTTTTTVVVVVVNNNNNNNNIIIBQQQQQQQQQPQQQQQQQQQQPYYYYYYYYYYYFFVTTTTTTRRRRWWWWKKKKFFFGFJJJJJJJJJJJJKKKKKKKKTTTTTTTTT
ACCCOORRRRRRRRRRRKKKKKKKKKOTTTTTTTTVVVVVVNNNNNNNNIIIIQQQQQQQQQPPPPPPPFFFFYYYYYYYYYYYBFFVTTTTRRRRWWWWKKKFFFFFFFFFJJJJJJJJJJKKKKKKKKKKTTTTTTTT
AAARRRRRRRRRRRRKKKKKKOOOOOOOOOYYTTMVVVVVVNNNNNNNNIIIIQQQQQQQQQPPPPPPPFFFYYYYYYYYYYYYYFFVVTRTRRRRWWWWFFFFFFFFFFFFJVJUJUUJJJJKKKKKKKKTTTTTTTTT
AAAARRRRRRRRRRRRRKKKKKOOOOOOOOYYVVVVVVVVVNNNNNNIIIIIIIIIBPPPPPPPPPPPPPPFYYYYYYYYYYYYYYFVVRRRRRRRRWFWWFFFFFFFFFFFFFUUBUUJJJJJKKKKKKKKKTTTTTTT
JJJRRRRRRRRRRRRRRKKKKOOOOOOOOOYOVVVVVVVNNNNNNNNNIMIIIIIIIPPPPPPPPPPPPPPFPYYYYYYYYYYYYYYVVNNNNRRRRWWWWWFFFUFFFFFFFFUUUUUJJJJJKKKKKKKKKTTTTTCT
JJJJJRRRRRRRRRRRKKKOOFOOOOOOOOYOVVVVVVVNNNNNNNNNRMIIIIIIOPPPPOOBOPPPPPPPPYYYYYYYYYYYYYYVVVNNRRRRWWWWWWFFFUUFFFFFFUUUUUULJJJJKKKKKKKKKZFCCTCT
JJJJJRRRRRRJRPPPKKKKOOOOOOOOOOOOVVVVVVVNNNNNNNNRRMIIIIOOOOOOOOOOOPPPPPPPYYYYYYYYYYYYYYVVVNYYYWWWWWWWWWWWWFFFRRFFIIIUUUULLJJJYYKKKKKKKKFFCCCC
JJJJJJRRRJRJJJPPKKKKKOOOOOOOOOOOOOLLLNNNNNNNZNNRBMIIIOOOOOOOOOOOPPPPPPPPYYYYYYYYYYYYYYVNNNYYYWWWWWWWWWWWWFFFFRFOQIIIUUUUUYYJYYYKKKKKKKFFFCCC
JJJJJJJJRJJJJJPPKKKPPPOOOOOOOOOLOOLLLNNNNNNNRNNRRMMMIOOOOOOOOOOPPPPPPPPPYYYYYNNNYYNNYYNNNNYYYWWWWWWWWWWWWFFFRRRQQQIIUUYYYYYYYYYKKSSSSFFFVFCC
JJJJJJJJJJJJJJTTTTTTOOOOOOOOOOOLLLLNNNNNNNRRRRRRRMMIIMMOOOOOOOOOPPPPPLPPYRYYYNNNNNNFYYNNNNYYYYYYYYYYYYYYYYYYFFFQQQQQYUYYYYYYYYYSSSSSFFDFFFFF
JJJJJJJJJJJJJHTTTTTTPPOOOOOOOOLLLLLNNNNNNNNRRRRMMMMMIMMMMOOOOOOPPLLLLLLLLJYYWPPDDNNNNNNNNNYYYYYYYYYYYYYYYYYYWFFFQQQQYYYYYYYYYYSSSSFFFFFFFFFO
JJJJJJJJJJJJJJTTTTTTTPPOOOOOLLLLLLLNNNNNNNNNNRRMMMMMMMMMTOOOOOTTLLLLLLLLLJJKPPDNNNNNNNNNNNYYYYYYYYYYYYYYYYYYWFFFFQQYYYYYYYYYYSSSFFFFFFFFFFFO
JJJJJJJJJJJJJJTTTTTTTPPTTTTOLSLSLNNNNNNNZNZZMMOMMMMMMTTMTOOOOOOTTLLLLLLLLJJJPPNNNNNNNNNNNNYYYYYWWWYYYYYYYYYYFFFQQQYYYYYYYYYSSSSSRFFFFFFFFFFF
JJJJJJJJJBJJBBTTTTTTTPPTTTTSLSSSLLNNNNNNZZZMMMMMMMMMMMTTTOOOOTTTTTTLLLLLLJJPPPNNNNNNNNNNNNYYYYYXWXYYYYYYYYYYQFFFQQYYYYYYYYYSYSSSRFFFFFFFFFFF
JJJJJJJJBBBBBBTTTTTTTPPTTTTSSSSSSSJNNNNNZZZMMMMMMMMMMMTTTOTTOTTTTTTTLLLMMJJPPPPNNNNNNNNNNNYYYYYXXXYYYYYYYYYYQXFAAYYYYYYYYYYYYSSSFFFFFFFFFFFB
JJJJJZJBBBBBBBTTTTTTTTTTTTTSSSSJJJJJJNZZZZZZZMMMMMMMMMTTTTTTTTTTTTTNLLPPPPPPPPPNMMNNNNNNNNYYYYYXXXYYYYYYYYYYXXXXAAYYYYYYYYYYYSSSFFFFFFFFFFFB
XJJJBBBBBBBBBBBBPPTTTTTTSSSSSSSJJJJJJJMMZZZZZZMUMMTMMTTTTTTTTTTTTNNNLLLLPPPPPPPPPPRNNNNNNNYYYYYNXXXXXXXXXXXXXXXXXAYYYYYYYYYYYJJJJJFFFDDDDDBB
XJJBBBBBBBBBBBBPPPTTTTTTSSSSSSSSSJJJMMMMZZZZZZMMMMTTTTTTTTTTNNNTTTNNLLLLLPPPBBPRRRRNRNNRRRYYYYYNNXXXXXXXXXXXXXXXAAAYYYYYYYYYYJJJJJNFFFDDDDBB
XXXXXBBBBBBBBBBBPPTTTTTTSSJJJSJJJJJMMMMMZZZZZZZZMDDDDTTTTTTTNNNNTNNNNLLLLLPPPBPNNRRNRRRRRZYYYYYXXXXXXXXXXXXXXXAAAAYYYYYYYYYYYJJJNNNFFFDDDDHD
XQQXXBBBBBBBBBBBPPTTTTTTJJJJJJJIIJIIMMMZZZZZZZZDMDDDDTTTTTTTNNNBNNNNNLLLLLLBBBBNNNRRRRRRRZYYYYYYYYYYYYXXXXXXXXAAAAAYYYYYYJJJJJJNNNNNWWDDDDDD
QQQQQBBBXXBBBBBBBRTTTTTTJJJJJJJIIIIIIMZZIZZZZZDDDDDDDDTTTTNNNNNNNNNNNNLLLLLLBBNNNNRZZZZRZZYYYYYYYYYYYYXXXXXXXAAAAOAAAYYYYYJJJJNNNNNNNWDDDDDU
QQQQQGJBXBBMBBBBRRTTTTTTBJJJJJJIIIIIIIIIIIZZZZDDDDDDDTTTTNNNNNNNNNNNNNLLLLLENNNNNNNZZZZZZZYYYYYYYYYYYYXXXXXXXAOOOOAAAAAYYHNNNJNNNNNNNWDNDUUU
QQQQQQJJJJQJJBRRRRTTTTTTBBBJJIIIIIIIIIIIIIIZZZDDDDDDDDDTTTNNNNNNNNNNNNLLLLLEEEEEENNZZZZZZZZYYYYYYYYYYYXCCCXXXXOOOOAAAAAANNNNNNNNNNNNNNNNSSUU
FQQQQQQJJJQQJFFFRRTTTTTTBBBBBBIIIIIIIIIIIIIZZZDDDDDDDDTTTXNNNNNNNNNNNNLEEEEEEEEEEZZZZZZZZZZYYYYYYYYYYYCCOOOOOOOOAAAAAAAANNNNNNNNNNNNNNNSSSNN
FQQQQQYJJJJJJFFFRRRRRRRZBBBUUBWIIIIIIIIIIZZZZZDDDDDDDDTTTXNNNNNNNNNNNNNEEEEEEEEEEZBZZZZZZZZYYYYYYYYYYYCCOOOOOOOOOAAAAAAAANNNNNNNNNNNNNNXXXNN
FFFJZQJJJJJJJFFRRRXXRRXBBBBBBBBIIIIIIIIIIZZZZZCCCDDDDDTTTXXXXNNNNNNANNEEEEEEEEEEEZZZZZZZZZZYYYYYYYYYYYCCCCOOOOOOOOAAAAAANNNNNNNNNNNNNNNNNNNN
FFFJJJJJJJJJJJFRXXXXXXXBBBBBBBIIIIIIIIIIIZZZZZCCCDDDDDXXXXXXXXNNNNAANAEEEEEEEEEEEEZMZZZZZZZYYYYYYYYYYYCCCCCOOOOOOOAAAAAAANNNQQQQNNNNNNNNNNNN
FFJJJJJJJJJJJJJGGXXXXXXBBBBBBBBIIIIIIZVVZZZZZCCCDDDDDDXXXXXXXXBBNNAANAEEEEEEEEEEEEEMMZZZZZZYYYYYYYYYYYCCCCCOOOOOOOAAAAALAAAAAQQQQNNNNNNNNNNN
FFJJJJJJJJJJJJGGGGXXXXXXQBYYBYIIIIIWZZVVZZZZZCDDDDDDDDXXXXXXXXAAAAAAAAAAEEEEEENNEEEMMMMZZZZYYYYYYYCCCCCCCCOOTTOOOOAAAAALLAAQQQQQQQQWNCNNNNNN
FFFJJJJJJJJJJBGGGGGXXXXXQQYYYYIIIIIZZZZZZZZZZWWWDDWWWWXXXXXAAAAAAAAAAAAEEEEEEENNNEMMMMMMMZZYYYYYYYCCCCCCCOOTTTOAAAAAAALLLAAAQQQQQQQWWNNNNNNN
XXXXXXJJJJJJJBBGGGGXXXXXQQYYYYIIIIIZZZZZZZZZWWWWDWWWWWWXXXXAAAAAAAAAAAAAAEEENENNNNMMMMMMMZZZEEREECCCCCCCCCTTTTAAAAAAAAALLQQQQQQQQQANNNNNNNNN
XXXXXJJJXJJJJBBBBGGGGXXQQYYYYYYYICCZZZZZZZZZWWWWWWWWWWWWWXXXAAAAAAAABAAAMNEENNNNNNMMMMMMMMIILEEEECCCCCCCCCTTTTAAAAAAAALLLHQQQQQQQQANLNNNNNNN
XXXXXXXXXXXXXBBBBGGGYHHYYYYYYYYYYKKKZZZZZZZZWWWWWWWWWWWWWWMXAHHHHAAAAAAANNEENNNNNNNMMMMMMMMILLEECCCCCRCCCCTTTTTTAAAAALLLLHHQQQQQQQAANNNNNNNN
YXXXXXXXXXXXCCBBBBBBYHYYYYYYYYYYYKKFFFZZZZZZZWWWWWWWWWWWWWMMMHHHHAALAAAANNENNNNNNNNNMMMMMMMLLEEEEEECCCCTTTTTTTTTTTAAALLLLLQQQQQQAQAAAANNNNNI
XXXXXXBNNNBBBBBBBABYYYYYYYYYYYYYYKKKFFZZZZZWWWWWWWWWWWWWWWMMMHHHHALLLLNNNNNNNNNNNNNNMMMMMMMMLLESESECKKTTTTTTTTTTTTAAALLLLLNQQQQQAAAAANNNAYYI
XXXXXBBBBBBBBBBBBBBYYYYYYYYYYYKKKKKKKKZKZZZZWWWWWWWWWWWWWWMMHHHHHHHLLLNNNNNNNNNNNNNNMMMMMLLLLSSSSSSETTTTTTTTTTTTTTTAALLLNNNQQQQQAAAAAAANNNYY
XXXXXXBBBBBBBBBBBBBYYNYYYYYYYKKKKKKKKKKKZZZZWWWWWWWWWWWWCMMHHHHHHHHHLLNNNNNNNNNNNNMNMMMMMLLLSSSSSSSSTTTTTTTTTTTTTTTTALLLNNNQQQIAAAAAAYANYYYY
QQXXQBBBBBBBBBBBBBIYYNYYYYYYYKYYKKKKKKKKKZZWWWJWWWWWCCCCCMMHHHHHHHUHLNNNNNNNNNNNNNMMMMLLLLLLSASSSSSSSTTTOOOOOOOOOOTAALLLLNNNNIIAAAAAYYYYYYYY
QQQQQBBBBBBBBBBBBBBBBNYYYYYYYYYKKKKKKBBBBBBBBBWWWWWWCCTCCCCHHHHHHHHHHSNNNNNBNNNNDNNNMLLLLLLLSSSSSSSSSSTTOOOOOOOOOOAAAAAANNNNNIIIAAAAAYYYYYYY
QQQQQQBBBBBBBBBBBBBBBBYYPYYYYYVVVVVKKBBBBBBBBBWWWWWZCCCCCCCHHHHHHHHHHSSNNNNBNNNDDDNNLLLLLLLLSSSSSSSSSSTTOOOOOOOOOOOAAAAAANINNIIAAAAAIIYYYYYY
LQLQQQBBBBBBBBBBBBBBBBDDPYYYYYVVVVKKKBBBBBBBBBZZZZZCCCCCCCHHHWHHHHHHSSSNNNNNNNNNDLLLLLLLLLLLSSSSSSSSSSTTOOOOOOOOOOOAAAAAANIIIIIIAAAIIIYYYYYY
LLLLQQBBBBBBBBBBBBBBPPPPPPYYYYVVVVVVVBBBBBBBBBZZZZZZZCCCCCCCCHHHHHHHSXSSSNSSNNNDDLLLLLLLLLLLLSSSSSSSSSTTOOOOOOOOOOOAAWANNNNNNIIIAIIIIIIYYYYY
LLLQQQQQBBBBBBBBBBBBPPPPPPYYYYYYUUVVVBBBBBBBBBZZZZZCCCCCCCCCCCHHHHHAXXSSSNSSSSSDDDLLLLLLLLLLLSSSSSSSSSSTOOOOOOOOOOWWWWWLLNIINIIIIIIIIIIYYYYY
LLLLLQQQBBBBBBBBBBBOPPPPPPPPMMMUUVVVVBBBBBBBBBZZZZZCCCCCCCCCCCCHHAAAAXSSSSSSSSSSSLLLLLLLLLLLIIISSSSSSSSSOOOOOOOOOOYWWWLLNNIIIIIIIIIIIIIYYYYY
LLEEEQQQBQQBBBBBBBBOOPPPPPPPPMMUUUVVVBBBBBBBBBZZZZZZZCCCCCCCCCCAAAAAXXXSXXSSSSSSSLLLLLLLLLLIISSSRRRRRRRRRROOOOOOOOWWWLLLLIIIIIIIIIIIIRIIIIYY
LDEEEQQQQQQJBBBBBJBPPPPPPPPPUUUUUUUUVBBBBBBBBBZZZZZZZCCCCCCCCCCCAAAAXXXXXXSSSSSSSLLLLLLLLIIIIISSRRRRRRRRRROOOOOOOOWLLLLLLPIIIIIIIIIIIIIIYYYY
LDDDQQQQQQQJBBBBJJJOPMPPPPPPPPUUUUUVVBBBBBBBBBZZZZZZZCCCCCCCCCCCAAAXXXXXXXXSSSSSSLLLLLLLLIIIIIISRRRRRRRRRROOOOOOOOWLLLLLLIIIIIIIIIIIIIIIYYYY
LDDDQQQQQJJJZZJJJJJOOPPPPPPPUUUUUUUVVVVVVZZZZZZZZZZZZZCCCCCCCCCCAAAAXXXXXXXSSSSSRLLLLLLLLLIIIIIIRRRRRRRRRREOOOOOOZWLLLLLLLLIIIIIIIIIIMIIYYYY
DDDDDQQQQJJJJZJJJJOOPPPPPPPPPUUUUUVVVVVVVZZZNNZZZZZZZZCCCCCCCCCCCAAAXAAXAAXSSSSSSLLLLLLLLLLIISSISSRRRRRRSSEOOOOOOZZLLLLLLLLIYYIIIIIIIMJJYYYY
DDDDDDJJJJJJJJJJJOOOOPPPPPPPPUUUUUUVVVVVVZZZNZZZZZZZZCCCCCCCCCCCCCAAAAAAAAAAASSLLLLLLLLLLLIIISSSSSRRRRRRSSZOOOOOOZZZLLLLLLLYYLIIIIJSSJJJYYYY
DDDDDDDJJJJJJJJJJOOOOPPRPPPPPUUVJUUVVVVVVNNNNNNZZZZZWECCCCCCCCCCCAAAAAOAAAAAALLLLLLLLLLLLLIIISSSSSRRRRRRFPPOOOOOOZZZLLLLLLLLLLJJJJJJJJJJJYYY
DDDDDDDJJJJJJJJJJJJOOOOPPUUPUUVVJVUVVVVVNNNNNNZZZZWWWWWWWWCWCCCCAAAAAAOAAAOALLLLLLLLLBBLLLLIIISSSSRRRRRRPPPZZZZZZZZZZLLLLLLLHJJJJJJJJJJYYYYY
DDDDDDDDDJJJJJJJOOOOOOOOOUUUUUVVVVUVVVVVVNNNNNNZZZWWWWWWWWWWWWCCAAAAAAOOOOOALLLLLLLLLBLLLLLIPISSSSRRRRRRRRRRRRZZZZZLLLLLLLLLHJJJJJJJJJJJYYYY
DDDDDDDDDJJJIOJOOOOOOOOOOOUCCVVVVVVVVVVVVVNZNNZZZWWWWWWWWWWWWWWIAAAAAAOOOOOAAOLLLELLLLLLLJLIPPSSSSSSRRRRRRRRRRPZZZZLLLLLLLLHHHJJJJJJJJJJJYYY
DDDDDDDDDDJJJOOOOOOOOOOOCCCCCCCVVVVVVVVVZZZZZZZZZZZWWWWWWWWWWIIIIAAAAOOOOOOOOOLLLLLLLLPPPPPIIPEESSSSRRRRRRRRRRPPPZZLLLLLLLHHHHJJJJJJJJJJYYYY
DDDDDDDDDDDDJOOOOOOOOOOOOCCCCCVVVVVVVVVVZZZZZZZZZZZWWWWWWWWWWWDDHDAAAOOOOOOOOOOOOLLLLPPPPPIIIPESSPSSRRRRRRRRRRMPPPMMLLLLLLHHHTJJJJJJJJJJJYYY
DDDDDDDDDDDNNNOOOOOOOOOOOCCCCVVVVVVVVVVZZZZZZZZZZZZZZWWWWWWWWWDDDDAAOOOOOOOOOOOOLLLLPPPPPIIIPPPPPPPPRRRRRRRRRRRRRMMLLLLLLLHHHHJJJJJJJJJJYYYY
DDDDDDDDDDDNNNOOUOOOOOOOOVCCVVVVVVVVVVVVZZZZGGZZZZZZZWWWWWWWWWWDDDDOOOYOOOOOOOOOLLLLLPPPPPPPPPPPPPPPRRRRRPMRRRRRRMLLLLLLLHHHHHJJJVVJJKJKKKYY
DDDDDDDDDDDUUNOOOOOOOOOOYVVCCVVVVVVVVVVVZLLLGGGGGGZGWWWWWWWWWWWDDDDOOOOOOOOOOOOOLYYYYPPPPPPPOPPPPNNNRRRRRPPRRRRRRMMLLLLLHHHHHHJVVVVVKKKKKKYK
DDDDDDDDDDDUUUOTTOOOOOYYYYVVVVVWWWWWCWVVVLLLLGGGGGGGWWWWWWWWWDDDDDDOVVOOOOOOOOZYYYYYYAAAPPAPPPPPNZNNRRRRRPMRRRRRRMMLLRRHHHHHVVVVVVVVVKKKKKKK
DDDDDDDZDDDUUOOOOPKHHHHYYYVVVVVVVWWWWWLLLLLLGGGGGGGGWWWWWWWDDDDDDDDVVVVVOOOOOOYYYYYYYYYAPPAANNNPNNNNRRRRRPMRRRRRRMMRLRRRRHHVVVVVVVIMKKKKKKKK
DDDDDDDZZDDXGOCCCKKKHKYYVVVTTTVVVWWWWWLWLLLLGGGGSGGGGGGWWDDDDDDDDDDDVVVVOOOOOOYYYYYYYYAAPAAANNNNNNNNNNNNPPPRRRRRRMMRRRRRRRRVVVMVVMMMMMKMKKKK
DDDDDUDXXXXXXXXCXKKKKKYYQQTTTTVVVWWWWWWWLLLGGGGGGGGGGGGGDDDDDDDDDDDDVVVVVOOOOYYYYYYYYYAAAANNNNNNNNNNNNNPPPPRRRRRRRRRRRRRRRVVVMMVMMMMMMMMMKKK
DTTTDUUXXXXXXXXXXKKTKKKTTTTTTTTTVTWTWWWWLLGGGGGGGGGGGGGGDDDDDDDDMMMDDVVVVVVVOYYYYYYYYYAAAANNNNNNNNNNNNNPPPWCCCCCRRRQRRRRRVVVVMMMMNMMMMMDMKKK
HHTXQXXXXXXXXXXXXKTTTTTTTTTTTTTTTTTTWWWWWWGGGGGGGGGGGGGGGDDDDDDDMMMMMVVVVVVVOYYYYYYYYYAAAANNNNNNNNNNNNNNPWWWWCCRRRRRRRRRRVVMMMMMMMMMMMMMMKKK
HHTXXXXXXXXXXXXXXEEETTTTTTTTTTTTTTTTWWWWWWDGGGGGGGGGGGGGGDDDDDDMMMMMMVVVVVVVVVYYYYYSYYYAINNNNNNNNNNNNNCPPPCWWCCCCCRRSRRRRVVMMMMMMMMMMMMKKKKK
HHHXXXXXXXXXXXXEEEEETTTTTTTTTTTTTTWWWWWWWWDGGGGGGGGGGGGGGGDDDDMMMMMMMVVVVVVVYYYYYYYIAIIIINNNNNNNNNNNNCCCPCCCCCCCCCCRRRRRRRMMRMMMMMMMMMMMMMKK
HHHKXXXXXXXXXXXEEEEETTTTTTTTTTTTTWWWWWWWDDDDGGGGGGGGGGGGGDDDDDMMMMMCMVVVVVVYYYYYYYYIIIIIINNNNNNNNNNNNNNCCCCCCCCCCCRRRRRRRRRRRMMMMMMMMMMMMKKK
HKKKSXXXXXXXXXXEEEEEETTTTTTTTTTTPPPWWPPFDDDDGGGGGGGGGGZZZDDDDDBBMMMMVVPVPVPYAAYYYYYYYIIIIINNNPNNNOOONNNCCCCCCCCCCRRRRRRRRIIRRMMMMMMMMMMMKKKK
KKKKSSSSXXXXXXXXEEEETTTTTTTTTTTTNNPPPPPFFDDGGGGGGGGZZZZZZDDDDDBBBMMMMVPPPPPAAAYIYYYIIIIIIIIIIPNNNOOOOTTTCFCFFCCCCCCCCRIIIMIRIMUMMMMMMMMMKKKK
KKSKSSSSXXXXXXXXXEEEETTTTTTTTTNNNNPNFFFFFDDGGGGGGGGZZZZZZZZDDDBBBBBBMVBIIPPPPAIIIIIIIIIIIIIIIIOOOOOTTTTSTFFFCCCCCVVIIIIIIIIIIMMMMMMMMMMMKKKK
SKSKSSSSSXXXXDXXDDDDDHTTHTTTTNNNNNNNBFFFFFDFBGSGGGFZZZZZZZDDDDBBBBBBYBBBPPPPPIIIIIIIIIIIIIIIIIOOOOTTTTTTTTFFFCCCCVVIIIIIIIIIIIMMMMMMMMMMMMKK
SSSSSSSSUUSSXDDDDDDDDHHHHTTTNNNNNNNNBFFGFFFFBGGGGKGGZZZZDDDDDDBBBBBBBBBPPPPPIIIIIIIIIIIIIIIIIIOOOTBBBBBBBBBFFFFFCFVVXJAIIIIIIIIMMMMMMMKKKKKK
SSSSSSSSSSSSHHDDDDDDDDHHHHTNNNNNNNNNNFFFFFFBBGGGGGGGGZZMDDDDDDBBBBBBBBPPPPPPPIBIIIIIIIYIIIIIIIIITTBBBBBBBBBBBFFFFFVVXJAAJJJJIIIIMMMMMMKKKKKK
SSSSSSSSSSSSHHHDDDRDDHHHHHNNNNNNNNNNNNFFPFFGBBGGGGGGGZLMMDDDDDBBBBBBBBIIMMPPPIBIIIIIYYYIIIIIIIIITTBBBBBBBBBBBFFFFFVVVJAJJJJJIIIIMMMMKKKKKKKK
SSSSSSSSSSSSHHHDDHHHHHHHHHNNNNNNNNQNNOFXGGGGGGGGGGGGGLLLDDDDDDGBBBBBBBIIMMMMPPMMIIIIYYIIIIIIILLLLLBBBBBBBBBBBFFFFFFVVJJJJJJJJIIIMMCMQKKKKJKK
SSSSSSSSSSSSSHHHHHHHHHHHHHHNNNNNNNNNOOFFGGGGGGGGGGGLLLLLOODDDDBBBBBBBBMMMMMMMMMMIIIIYYYYIIIIILLLCCBBBBBBBBBBBFFFFFFFJJJJJJJJJJJJJCCMQQKKJJKK
SSSSSSSSSSSSSHHHHHHHHHHHHHHNNNNNNNNNOOOOGGGGGGGGGGGULLLLLLODDDBBBBBBBBMMMMMMMMMMIIIIIYYIIIIILLLLLLBBBBBBBBBBBFFFFFFJJJJJJJJJJJJJJCCCCQQQJJKK
SSSSSSSSOOOOOHHHHHHHHHHHHJHNNNNNNNNNOOOOGGGGGGGGGGGUUUELLLLDFBBBBBBBBBMMMMMMMMMMMIIIEBYIIILLLLLLLCBBBBBBBBBFFFFFFOOUJJJJJJJJJJJJJCCCCQJJJKKK
SSSSSSSSOOOOOHHHHHHJHHHHHJJJJNNNNNVVOOOOGGGGGGGGGGGDUUELLXXDBBBBBBBBBBMMMMMMMMMMMIMIEBIIIILLLLLLLCBBBBBBBBBFFFFFFOOUOOJJJJJJJJJJJJJJJJJJJJKK
SSSSSSSSOOOOOHHHHHHJHHHHHJJJJNNNNAVVVOOOOGGGGGGGGGGUUUUUUXXDTBBBBBBBBBMMMMMMMMMMMMMIEEEIIIELLLLLLCCFFFFFFFFFFFFFFOOOOOJJJJJJJJTJXXXJJJJJJJJK
SSSPSPPPAAOOOHHHHHHJHHHHCJJJJNNJAAVVVVVOOOGGGGGGGGGUUUUUUXXUTTTTTBBBBBMMMMMMMMMMMMEEEEEIITELLLLCCCCCFFFFFFFFFFFFOOOOOOJJJJJJJJJJXDDDJDDDDXJK
SSPPPPPPAOOOOOHHHHHTHHCCCJJJJJJJJAVVVVVVGGGGGGGGGGGUUUUUUUUUTTTTBBBBBMMMMMMMMMMMMEEEEEEEEEELLLLCCCCCFFCFFFFFFFFFFOOOOOJJJJJJJJXXXDDDDDDDDDDD
PPPPPPPPPPOOBOHHHHHTMTCJJJJJJJJJJVVVVVVVGGGGGGGGGGGUUUUUUUUUTTTTTBBTTTMMMMMMMMMMEEEEZZZZZZZLZZZZZZZCFCCFFFFFOFOOOOOOOOOJJJJJYXXXDDDDDDDDDDDD
PPPPPPPPPPOOOOHTTTTTTTTEJJJJJJJJJVVVVVVVGGGGGGGGGGGUUUUUUUUUTTTTTTTTTTMTMMMMMMMMEEEEZZZZZZZEZZZZZZZCCCCCCFFFOOOOOOOOOOOOOYYYYXXXXDDDDDDDDDWD
PPPPPPPPPPUOHHHHHTTTTTTJJJJJJJJJVVVVVVVVVVGZZFFGGFGUUUUUUUUUUTTTTTTTTTTTTTMMMMEEEEEEZZZZZZZZZZZZZZZCCCCCCCFOOOOOOOOOOOOOYYYYYYXXDDDDDDDDDDDD
PPPPPPPPPPPHHTTTTTTTTJJJJJJJJJJJJJJVVVVVVVGGFFFFFFFUUUUUUUUUUTTTTTTTTTTTTTTTMMMEEZZLZZZZZZZZZZZZZZZCCCCCCCCOAAOOOOOOOOFYYYYYYYYYDDDDDDDDDDDD
PPPPPPPPPPZRRTTRTTTTTTTJJJJJJJJJJJJVJVVVVVVGFFFFFFFUUUUUKUUUUUTTTTTZTTTTTTTTZZZZZZZZZZZZZZZZZZZZDDDDDCCCCCCCCAOOOOOOBYYYYYYYYYYYYDDDDDDDDDDI
PPPPPPPPPPZRRFFRTTTTTTTTTJJJJJJJJJJJJJJVVFFFFFFFFFFYUUFYYYUUUTTTTTZZZZTTTTZZZZZZZZZZLLLLLLLLLZZZDDDDDCCCCCCCAAAAAOOOZZZZZZZZZYYYDDDDDDDDDIII
PPPPPPPPPPRRRRRRRTTTTTTTTJJJJJJJJJJJFFFDFFFFFFFFFFFYUFFFYYYYYYTTTTZZTZTTTTTZZZZZZZZZRLLLLLLLLZZZDDDDDZZZZZZCAAAAAOOOZZZZZZZZZYYYDDDDDDLDDDII
PYPPPPPPPRRRRRRRRRTTTTTTJJJJJJJJJJJFFFFFFFFFFFFFFFYYFFFYYYYYYYTTZZZZTTTTTTTZZZZZFZZPRRLLLLLLLZZZDDDDDZZZZZZAAAAAZZZZZZZZZZZZZZZZDDDHHHKKKIII
LPPRPPPRPRRRRRRRRRTTTXTTJJJJJJJJJJJFFFFFDFFFFFFYYFYYYFYYYYYYYYYZZZZZZTTTTTTTTZAZZARRRRRLLLLLLZZZDDDDDZZZZZZAAAAAZZZZZZZZZZZZZZZZYYDFFFFKKIII
LLLRRRRRPRRRRRRTTTTTTXTTWJJJJJJVVJJFDDFFFFQQFFFYYYYYYYYYYYYYYYZZZZZZZTTTTTTTTZAZZRRRRRRLRRLRLLLLDDDDDZZZZZZAAAAAZZZZZZZZZZZZZZZZHHFFKKKKKIII
LLLRRRRRRRRRRRRKTXTTXXTTTDJJJJJJDDDDDDFFFFQQQQFRYYYYYYYYYYYYYYZZZZZZZZZZZTTTTZCCRRRRRRRRRRRRRZZZZZZZZZZZZZZZZZAAZZZZZZZZZZZZYYYYHFFFFKKKKIII
LRRRRRRRRRRRRRXXXXXXXXTTTDJDDJJJDDDDDDFYYQQQQYYYYYYYYYYYYYYYYYZZZZZZZZZZZZZZZZCCRRRRRRRRRRRRRZZZWWWWWWWWZZZZQQQQZZZZZZZZZZZZYKFFFFFFFFKKKKII
RRRRRRRRRRRRRXXXXQXXXXTTTDDDDJDDDDDDDDDDYQYYYIIYYYYYYYYYYYYYYYYZZZZZZZZZZZZZZZCCCRRRRRRRRRWRRZZZWWWWWWWWZZZQQQQQZZZZZZZZZZZZYFFFFFFFFKKKKKII
RRRRRRRRRRRRXXXXXXXXXXXXXDDDDDDDDDDDDDDDYQQYYYIYIYYYYYYYYYYYYYYZZZZZZZZZZZZZNCCCCRRRRRRRRUUUUZZZWWWWWWWWZZZQQQQQZZZZZZZZZZZZFFFFFFFFFKKKKKII
RRRRRRRRRRRRXXXXXXXXXXXXXXDDDDDDDDDDDDDYYYYYYYIIIYYYYYYYYYYYYYYYZZZZZZZZZZZZNXCCCWWWWWWWWWWWWWWWWWWWWWWWZZZQQQQQZZZZZZZZZZZZFFFFFFFFDFKKKKKI
RRRRRRRRRRRRXXXXXXXXXXXXDXDDDDDDDDDYYYDYYYYYYYYIIIIYYYYYYTYYAYTTTTZZZZZZZZZZNNNNNWWWWWWWWWWWWWWWWWWWWWWWZZZZZZZZZZZZZZZZZZZZFFFFFFFFFFKRKIII
RRRRRRRRRRRRXXXXXXXXXXXXXXDDDDYYYYYYYYYYYYYYYIIIIICCCCITTTTTATTLTTZZZZZZZZZZNFNNNWWWWWWWWWWWWWWWWWWWWWWWZZZZZZZZZQQQQTTKKKKFFFFFFFFFFFFRKIII
PPPPRRRRRRRXXJXXXXXXXXXXXXDDDYYYYYYYYYYYYYYYYIIIIIICCDTTTTTTTTTTTTZZZZZZZZZZNNNNNWWWWWWWWWWWWWWWWWWWWWWWGZZZZZZZZQQQTTTTKKKFWFFFFFFFFFRRIIRR
PPRRRRRRRRCXJJJXXXXTXXXXXXXDYYYYYYYYYYYYYAYYYYIAIIICCDDTTTTTTTTTTTZZZZZZZZNZNNNNNWWWWWWWWWWWWWYYWWWWWWWWQZZZZZZZZQQQTKKTKKKKKKQFFFFRRRRRRRRR
PPPRRRPJJJJJJJJJJJXXXXVIXXXYYYYYYYYYYYYYYAAYAPAAAXICCTTTTTTTTTTTTTTTTTZMMMNNNNNNNNGGGWWWWWWWWWYNWWWWWWWWQZZZZZZZZQQQQKKKKKKKKQQQQFFRRRRRRZRR
PPPPPPPPPJJJJJJJJJJVVVVVVXXYYKKYYYYYYYYYYYAAAAAAAXXCJXTTTTTTTTTTTTJTJJMMMMMNNNNNNNNNGWWWWWWWWWYNMMNNNNNNQZZZZZZZZQQQQKKKKKKKKKKKQKKKRRRZRZRR
PPPPPPPPPPJJJJJJJJJVVVVVVXKKKKKYYYYYYYYYYYYAAAAXXXXXXXXXTTTTTTTTTTTJJMMMMMMNNNNNNGGGGWWWWWWWWWYYNMNNNNNQQQQQQQQQQQQQKKKKKKKKKKKKKKKKRRRZZZRR
PPPPPPPPPJJJJJJJJJVVVVVVVVVKYKYYYYYYYYZZZYYYXXXXXXXXXXXXTTTTTTTTTTTTMMMMMMMMNNNNGGGGGWWWWWWWWWNNNNNNNNNNQQQQQQQQQQQQKKKKKKKKKKKKKKKRRRRRZZZR
PPPPPPPPPJJJJJJJVVVVVVVVVVIYYYYYYYYYYYYZZZZYXXXXXXXXXXXXTTTTTTTTTTTTMMMMMMMMNNNNNGGGGWWWWWWWWWNNNNNPNNNQQQQQQQUQQQQKKKKKKKKKKKKKKKKKRRRRRZZZ
PPPPPPPPPJJJJJJJVVVVVVVVVVYYYYYYYYYYYZZZZZZZXXXXXXXXXXAAAAATTTTTTMMMMMMMMMMMNNNNGGGGGWWWWWWWWWJJNNNNNNNAAQQNQQUQQQKKKKKKKKKKKKKKKKKKRRRRRZYY
PPPPPPPPPJJJJJJVVVVVVVVVVVVMYYYYYYYDDZZZZZZJXXXXXXXXXXAAAAAFTTTTTTNMMMMMMMHMNNNNGGGGGWWWWWWWWWJJGGGNNNNNAAPPPUUUQQKKKKKKBBBKKKKKKKKKRRRRYZYY
PPPPPPPPPPJJJJJJVVVVVVVVVVVMMYYYYYYDZZZZZZZZXXXXXXXXXXAAAAAAATTTFTTMMMMMMMMNNNNNNNGGGGGGGJJJJJLLGGGGGGNOPPPPPPUUUUUUBKBBBBBBKKKKKKKKKKYYYYYY
PPPPPPEEPJJJJJJJVVVVVVVVVVVMYYYYYYYDZZZZZZZXXXXXXXXXXXXAAAAAAATTPPPPMMMMMPPNNNNNNNGGGGGGGJJJJLLLLGGGGOOOOPPPPPPUBBBBBBBBBBBBBKKKKKKKKIIKYYYY
PPPPPPEEEJJJJJJJVVVVVVVVVVVVPYYYYYZZZZZZZZZZZXXXXXXXXAAAAAAAAATPPPPPMMPMPPPNNNNGGGGGGGGJJJJJGGGGGGGGOOOOOOPPPPUUBBBBBBBBBBBBBBKKKKKKKKKKYYYY
MPPPMMEEEJJJJJJVVVVVVVVFFFVPPPPPYPZZZZZZZZZZZZXXXXXXXAADDDAAAAAPPPPPPPPPPNNNNNNGGGGGGGBJJJJJGGGGGGGGGGOOOOPPPPPUBUBBBBBBBBBBBBKKKKKKKKKKYYYY
MMPPMMEEEEJJJJJJEEVGVVVEFEEWWWWPYPPPZZZZZZZZZZXXXXXXXXAADDDAMMMMMPPPPPPPPNNNNNNNNHHGJJJJJJJJJGGGGGGGGGGGOOPPPPPPPUUBBBBBBBBBBBAAKKKKKKKKYYYY
MMMMMMDDJJJJJEJJJEVVVVVEEEEWWWWPPPPZZZZZZZZZXXXXXXXXXAADDDDMMMMMPPPPPPPPPPNWNNNKNHGGJJJJJJJJGGGGGGGGGGGGGOPPPPPPUUUBBBBBBBKBBHAAKKFKKKKFYYYY
MMMMMDDDDJJJJEEJJEEEVVVNEEEWWWWPPPPZPWWZZZZZZZXAAXAAAAADDDDMMAAAPPBPPPPPNNNWNNNNJJJGJJJJJJJJGGGGGGGGGGGGGGPPPPPPPPBBBBBBBBBFFAAAAKFFFKKFYXYY
YMMMMDDDDDDDJJEEEEEEVEEEEEEWWWWWPPPPPWWWZZZZZZAAAAAAAAADDDDAAAAANPBBBBBUTURUUUUUJJJJJJJJJJJGGGGGGGGGGGGGGGPPXXPPGGGBBBBBBBFFFFAAAFFFFFFFYYYY
YMYMDDDDDEEEJJEEEEEEEEEEEEEWWWWWPPPWWWWWWZZZZZZAAAAACADDDDAAAAAANPDDDBUUUURUUUUJJJJJJJJJJJJGGGGGGGGGGGGGGGPGPPPPGGGBBBBBBBBBFAAAAFFFFFFFFYYY
YYYMDDDDDEEEEEEEEEEEEEEEWWWWWWWWWWWWWWWWMZZZZZAAAAAACAACDDAADAAADDDDDUUUUUUUUUUCJJJJJJJJJJJJJGGGGGGGGGGGGGGGGPPGGGGBBBBBBBBBFFFFFFFFFFFFFFYY
YYYEEEDDDEEEEEEEEEEEEEEEWWWWWWWWWWWWWWWWMZZZZZAAAAAACCACDDDADADAADDDUUUUUUUUUUJCJJJJJJJJJJJJJGGGGGGGGGGGGGGGGGGGGGGBBBBBBBBBBFFFFFFFFFFFFFFF
YYEEEEEEEEEEEEEEEEEEEEEWWWWWWWWWWWWWWWWWWZZZZAAAAAACCCCCCDDDDADDDDUUUUUUUUUUUUJJJJJJJJJJJJJJJJGGGGGGGGGGGGGGGGGGGGGBBBBBBBBBBFFFFFFFFFFFFFFF
YEEEEEEEEEEEEEEEEEEEEEEEWWWWWWWWWWWWWWWWWFFZZAAAAAAACCCCCDDDDDDDDDUUUUUUUUUUUUIJJJJJJJJJJJJJJJGGGGGGGGGGGGGGGGGGGGGGGGGBBBBBBBBFFFFFFFFFFFFF
YYYYEEEEEEEEEEEEEEEEEEEEWWWWWWWWWWWWWWWWFFFZZZAAAAAAACCCDDDDDDDDDUUUUUUUUUUUUUUUJJJJJJJJJJJJJJGOOGGGGGGGGGGGGGGGGGGGGGGGBBBBBBBFFFFFFFFFFFFF";

RunPart1(input);
RunPart2(example);

static void RunPart1(string input)
{
    int result = 0;
    var lines = input.Split("\r\n").ToArray();

    char[][] map = new char[lines.Length][];

    for (int i = 0; i < lines.Length; i++)
        map[i] = lines[i].ToCharArray();

    var regions = FindRegions(map);

    foreach (var region in regions)
    {
        int fences = 0;
        foreach (var point in region)
            fences += FencesByPlant(map, point);

        result += fences * region.Count;
    }

    Console.WriteLine($"Part 1 result: {result}");
}

static void RunPart2(string input)
{
    int result = 0;
    var lines = input.Split("\r\n").ToArray();

    char[][] map = new char[lines.Length][];

    for (int i = 0; i < lines.Length; i++)
        map[i] = lines[i].ToCharArray();

    var regions = FindRegions(map);

    foreach (var region in regions)
    {
        int fences = 0;
        foreach (var point in region)
            fences += FencesByPlant(map, point);

        result += fences * region.Count;
    }

    Console.WriteLine($"Part 2 result: {result}");
}

static List<List<(int x, int y)>> FindRegions(char[][] map)
{
    int rows = map.Length;
    int cols = map[0].Length;

    bool[][] visited = new bool[rows][].Select(_ => new bool[cols]).ToArray();
    List<List<(int x, int y)>> regions = new();

    int[][] directions = new int[][]
    {
            new int[] { -1, 0 },
            new int[] { 1, 0 },
            new int[] { 0, -1 },
            new int[] { 0, 1 }
    };

    void DFS(int x, int y, char target, List<(int x, int y)> region)
    {
        visited[x][y] = true;
        region.Add((x, y));

        foreach (var direction in directions)
        {
            int newX = x + direction[0];
            int newY = y + direction[1];

            if (newX >= 0 && newX < rows && newY >= 0 && newY < cols && !visited[newX][newY] && map[newX][newY] == target)
                DFS(newX, newY, target, region);
        }
    }

    for (int i = 0; i < rows; i++)
    {
        for (int j = 0; j < cols; j++)
        {
            if (!visited[i][j])
            {
                List<(int x, int y)> region = new();
                DFS(i, j, map[i][j], region);
                regions.Add(region);
            }
        }
    }

    return regions;
}

static int FencesByPlant(char[][] map, (int x, int y) plant)
{
    int[][] directions = new int[][]
    {
        new int[] {-1,  0},
        new int[] { 1,  0},
        new int[] { 0, -1},
        new int[] { 0,  1}
    };

    int rows = map.Length;
    int cols = map[0].Length;

    int fences = 0;
    foreach (var direction in directions)
    {
        int newX = plant.x + direction[0];
        int newY = plant.y + direction[1];

        if (newX >= 0 && newX < rows && newY >= 0 && newY < cols)
        {
            if (map[newX][newY] != map[plant.x][plant.y])
                fences++;
        }
        else
            fences++;
    }

    return fences;
}